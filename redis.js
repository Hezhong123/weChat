const Redis = require('ioredis');

// å¾ç’°å¢ƒè®Šæ•¸æˆ–ç¡¬ç·¨ç¢¼é…ç½® Redis é€£ç·šè³‡è¨Š
// å¼·çƒˆå»ºè­°ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ä¾†ç®¡ç†æ•æ„Ÿè³‡è¨Š (å¦‚å¯†ç¢¼) å’Œä¸åŒç’°å¢ƒ (é–‹ç™¼/ç”Ÿç”¢) çš„é…ç½®
const redisConfig = {
    port:  6379,          // Redis åŸ è™Ÿ
    host:  '114.132.75.251',   // Redis ä¸»æ©Ÿä½å€
    password: 'hez123',  // å¦‚æœ Redis æ²’æœ‰å¯†ç¢¼ï¼Œè¨­å®šç‚º null
    db: 1,                 // é¸æ“‡ Redis è³‡æ–™åº« (é è¨­ç‚º 0)
    maxRetriesPerRequest: null,                    // ç¦ç”¨æ¯å€‹è«‹æ±‚çš„é‡è©¦ï¼Œè®“æ•´å€‹é€£ç·šè™•ç†é‡è©¦
    // å…¶ä»–å¯é¸é…ç½®ï¼Œä¾‹å¦‚é€£ç·šæ± å¤§å°ã€é€¾æ™‚ç­‰ï¼Œæ‚¨å¯ä»¥æ ¹æ“šéœ€æ±‚æ·»åŠ 
    // enableOfflineQueue: true, // ç•¶é€£ç·šæ–·é–‹æ™‚ï¼Œå‘½ä»¤æ˜¯å¦æ’éšŠç­‰å¾…é‡é€£å¾ŒåŸ·è¡Œ (é è¨­ true)
    // retryStrategy: times => Math.min(times * 50, 2000), // è‡ªå®šç¾©é‡é€£ç­–ç•¥
};

const redis = new Redis(redisConfig);

// ç›£è½é€£ç·šæˆåŠŸäº‹ä»¶
redis.on('connect', () => {
    console.log('ğŸ‰ æˆåŠŸé€£æ¥åˆ° Redis!');
});

// ç›£è½é€£ç·šéŒ¯èª¤äº‹ä»¶
redis.on('error', (err) => {
    console.error('âŒ Redis é€£ç·šéŒ¯èª¤:', err);
});

// åŒ¯å‡º Redis å¯¦ä¾‹ï¼Œä»¥ä¾¿åœ¨å…¶ä»–åœ°æ–¹é‡è¤‡ä½¿ç”¨
module.exports = redis;